<%= contentFor("title") { %> Buybacks <% } %>
<%= contentFor("body-class") { %>list<% }  %>
<%= contentFor("action-buttons") {%>
    <div class="d-flex">
        <%= if (!order.IsOrderPosition) { %>
            <button class="btn btn-primary ml-2 d-flex align-items-center justify-content-between"
                hx-post="/buybacks/<%= order.ID %>/bybit/create"
                hx-trigger="click"
                hx-swap="none"
                hx-target="#Buybacks">
                Create Bybit Buybacks
            </button>
            <button class="btn btn-success ml-2 d-flex align-items-center justify-content-between"
                hx-post="/buybacks/<%= order.ID %>/binance/create"
                hx-trigger="click"
                hx-swap="none"
                hx-target="#Buybacks">
                Create Binance Buybacks
            </button>
        <% } %>
        
        <button type="button" class="btn btn-danger ml-2 d-flex align-items-center justify-content-between" data-bs-toggle="modal" data-bs-target="#DeleteBuybacks">
            Delete Buybacks
        </button>
    </div>
<% } %>

<%= partial("/partials/breadcrumb.plush.html",{
    homePath: ordersPath(),
    isBuybackPage: true,
    beforeSession: "Order",
    beforeSessionPath: orderDetailsPath({order_id: order.ID}),
    session: "Buybacks",
    sessionPath: 	buybackOrderID09aZPath({order_id: order.ID}),
    currentPage: "List",
}) %>

<%= if (len(buybacks) == 0) { %>
    <!-- html here -->
<% } else { %>
    <div class="mt-4" id="Buybacks">
        <table class="table table-dark table-striped">
            <thead>
                <tr>
                    <th scope="col">#</th>
                    <th scope="col">Price</th>
                    <th scope="col">Currency Amount</th>
                    <th scope="col">Cost</th>
                    <th scope="col">Stop Loss</th>
                    <th scope="col">Average</th>
                </tr>
            </thead>
            <tbody>
                <%= for (i, buyback) in buybacks { %>
                    <tr>
                        <th scope="row"><%= i + 1 %></th>
                        <td class="float-number"><%= buyback.Price %></td>
                        <td class="float-number-two"><%= buyback.CurrencyAmount %></td>
                        <td>$<span class="float-number-two"><%= buyback.Value %></span></td>
                        <td class="float-number"><%= buyback.StopLossPrice %></td>
                        <td class="float-number"><%= buyback.Average %></td>
                    </tr>
                <% } %>
            </tbody>
        </table>
    </div>
<% } %>

<!-- Modal -->
<div class="modal fade" id="DeleteBuybacks" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Delete Buybacks</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <span>Are you sure you want to remove these buybacks?</span>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
        <button class="btn btn-danger"
            hx-delete="/buybacks/<%= order.ID %>/delete">
            Delete
        </button>
      </div>
    </div>
  </div>
</div>